<!doctype html>
<html>
  <head>
    <title>天气 API 文档</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <script id="api-reference" type="application/json">
{
  "openapi": "3.0.0",
  "info": {
    "title": "天气 API",
    "version": "1.0.0",
    "description": "天气数据聚合 API 代理服务，统一代理高德地图、百度地图、和风天气、OpenWeather 等服务，提供缓存加速与 API Key 隐藏。"
  },
  "servers": [
    {
      "url": "https://wt-prod-k8m3.chauncey.workers.dev",
      "description": "生产环境"
    }
  ],
  "tags": [
    {
      "name": "IP",
      "description": "IP 地理定位"
    },
    {
      "name": "高德地图",
      "description": "高德地图 API（地理编码、天气）"
    },
    {
      "name": "百度地图",
      "description": "百度地图 API（天气）"
    },
    {
      "name": "和风天气",
      "description": "和风天气 API（实况、预报、指数、天文、预警、空气质量）"
    },
    {
      "name": "OpenWeather",
      "description": "OpenWeather API（天气、预报、空气质量、地图瓦片）"
    }
  ],
  "paths": {
    "/amap/geocode": {
      "get": {
        "summary": "高德地图地理编码（地址转经纬度）",
        "tags": [
          "高德地图"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "address",
            "required": true,
            "schema": {
              "type": "string",
              "example": "北京市朝阳区阜通东大街6号"
            },
            "description": "待解析的地址字符串"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回经纬度坐标"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/amap/weather": {
      "get": {
        "summary": "高德地图天气查询",
        "tags": [
          "高德地图"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "city",
            "required": true,
            "schema": {
              "type": "string",
              "example": "110101"
            },
            "description": "城市编码（adcode），如 110101 代表北京市东城区"
          },
          {
            "in": "query",
            "name": "extensions",
            "schema": {
              "type": "string",
              "enum": [
                "base",
                "all"
              ],
              "default": "base"
            },
            "description": "base=返回实况天气；all=返回预报天气"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回天气数据"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/bmap/weather": {
      "get": {
        "summary": "百度地图天气查询",
        "tags": [
          "百度地图"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "lon",
            "required": true,
            "schema": {
              "type": "string",
              "example": "116.404"
            },
            "description": "经度"
          },
          {
            "in": "query",
            "name": "lat",
            "required": true,
            "schema": {
              "type": "string",
              "example": "39.915"
            },
            "description": "纬度"
          },
          {
            "in": "query",
            "name": "country",
            "schema": {
              "type": "string",
              "default": "CN",
              "example": "CN"
            },
            "description": "国家代码，CN=中国（使用国内接口），其他=海外接口"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回天气数据"
          },
          "400": {
            "description": "缺少必要参数"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/ip": {
      "get": {
        "summary": "获取客户端 IP 地理定位信息",
        "tags": [
          "IP"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "lang",
            "schema": {
              "type": "string",
              "default": "zh-CN",
              "example": "zh-CN"
            },
            "description": "返回数据的语言（zh-CN / en）"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回 IP 定位数据"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/openweather/weather": {
      "get": {
        "summary": "OpenWeather 当前天气",
        "tags": [
          "OpenWeather"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/OWLon"
          },
          {
            "$ref": "#/components/parameters/OWLat"
          },
          {
            "$ref": "#/components/parameters/OWLang"
          },
          {
            "$ref": "#/components/parameters/OWUnits"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回当前天气数据"
          },
          "400": {
            "description": "缺少必要参数（lon / lat）"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/openweather/forecast": {
      "get": {
        "summary": "OpenWeather 5 天 / 3 小时天气预报",
        "tags": [
          "OpenWeather"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/OWLon"
          },
          {
            "$ref": "#/components/parameters/OWLat"
          },
          {
            "$ref": "#/components/parameters/OWLang"
          },
          {
            "$ref": "#/components/parameters/OWUnits"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回预报数据（每 3 小时一条）"
          },
          "400": {
            "description": "缺少必要参数（lon / lat）"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/openweather/air": {
      "get": {
        "summary": "OpenWeather 空气污染数据",
        "tags": [
          "OpenWeather"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/OWLon"
          },
          {
            "$ref": "#/components/parameters/OWLat"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回空气质量指数（AQI、CO、NO2、PM2.5 等）"
          },
          "400": {
            "description": "缺少必要参数（lon / lat）"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/openweather/map": {
      "get": {
        "summary": "OpenWeather 地图瓦片（PNG 图片）",
        "tags": [
          "OpenWeather"
        ],
        "parameters": [
          {
            "in": "query",
            "name": "layer",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "clouds_new",
                "precipitation_new",
                "pressure_new",
                "wind_new",
                "temp_new"
              ],
              "example": "temp_new"
            },
            "description": "地图图层类型"
          },
          {
            "in": "query",
            "name": "z",
            "required": true,
            "schema": {
              "type": "integer",
              "example": 3
            },
            "description": "缩放级别"
          },
          {
            "in": "query",
            "name": "x",
            "required": true,
            "schema": {
              "type": "integer",
              "example": 6
            },
            "description": "瓦片 X 坐标"
          },
          {
            "in": "query",
            "name": "y",
            "required": true,
            "schema": {
              "type": "integer",
              "example": 3
            },
            "description": "瓦片 Y 坐标"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回 PNG 地图瓦片",
            "content": {
              "image/png": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "400": {
            "description": "缺少必要参数"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/qweather/now": {
      "get": {
        "summary": "和风天气实况",
        "tags": [
          "和风天气"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/QWeatherLon"
          },
          {
            "$ref": "#/components/parameters/QWeatherLat"
          },
          {
            "$ref": "#/components/parameters/QWeatherLang"
          },
          {
            "$ref": "#/components/parameters/QWeatherUnit"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回实时天气数据"
          },
          "400": {
            "description": "缺少必要参数（lon / lat）"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/qweather/forecast": {
      "get": {
        "summary": "和风天气逐日预报",
        "tags": [
          "和风天气"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/QWeatherLon"
          },
          {
            "$ref": "#/components/parameters/QWeatherLat"
          },
          {
            "$ref": "#/components/parameters/QWeatherLang"
          },
          {
            "$ref": "#/components/parameters/QWeatherUnit"
          },
          {
            "in": "query",
            "name": "period",
            "schema": {
              "type": "string",
              "enum": [
                "3d",
                "7d",
                "10d",
                "15d",
                "30d"
              ],
              "default": "7d"
            },
            "description": "预报天数"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回天气预报数据"
          },
          "400": {
            "description": "缺少必要参数（lon / lat）"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/qweather/indice": {
      "get": {
        "summary": "和风天气生活指数",
        "tags": [
          "和风天气"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/QWeatherLon"
          },
          {
            "$ref": "#/components/parameters/QWeatherLat"
          },
          {
            "$ref": "#/components/parameters/QWeatherLang"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回生活指数（运动、洗车、穿衣等）"
          },
          "400": {
            "description": "缺少必要参数（lon / lat）"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/qweather/astronomy": {
      "get": {
        "summary": "和风天气天文数据（日出日落 / 月出月落）",
        "tags": [
          "和风天气"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/QWeatherLon"
          },
          {
            "$ref": "#/components/parameters/QWeatherLat"
          },
          {
            "in": "query",
            "name": "astronomy",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "sun",
                "moon"
              ],
              "example": "sun"
            },
            "description": "天文类型，sun=日出日落，moon=月出月落"
          },
          {
            "in": "query",
            "name": "date",
            "required": true,
            "schema": {
              "type": "string",
              "example": "20240101"
            },
            "description": "查询日期，格式 yyyyMMdd"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回天文数据"
          },
          "400": {
            "description": "缺少必要参数"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/qweather/alert": {
      "get": {
        "summary": "和风天气灾害预警",
        "tags": [
          "和风天气"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/QWeatherLon"
          },
          {
            "$ref": "#/components/parameters/QWeatherLat"
          },
          {
            "$ref": "#/components/parameters/QWeatherLang"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回灾害预警信息"
          },
          "400": {
            "description": "缺少必要参数（lon / lat）"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    },
    "/qweather/air": {
      "get": {
        "summary": "和风天气空气质量",
        "tags": [
          "和风天气"
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/QWeatherLon"
          },
          {
            "$ref": "#/components/parameters/QWeatherLat"
          },
          {
            "$ref": "#/components/parameters/QWeatherLang"
          }
        ],
        "responses": {
          "200": {
            "description": "成功返回空气质量数据（AQI、PM2.5 等）"
          },
          "400": {
            "description": "缺少必要参数（lon / lat）"
          },
          "403": {
            "description": "请求来源不在白名单"
          }
        }
      }
    }
  },
  "components": {
    "parameters": {
      "OWLon": {
        "in": "query",
        "name": "lon",
        "required": true,
        "schema": {
          "type": "string",
          "example": "116.404"
        },
        "description": "经度"
      },
      "OWLat": {
        "in": "query",
        "name": "lat",
        "required": true,
        "schema": {
          "type": "string",
          "example": "39.915"
        },
        "description": "纬度"
      },
      "OWLang": {
        "in": "query",
        "name": "lang",
        "schema": {
          "type": "string",
          "default": "zh_cn",
          "example": "zh_cn"
        },
        "description": "返回语言（zh_cn / en / ...）"
      },
      "OWUnits": {
        "in": "query",
        "name": "units",
        "schema": {
          "type": "string",
          "enum": [
            "standard",
            "metric",
            "imperial"
          ],
          "default": "standard"
        },
        "description": "单位制，standard=开尔文，metric=摄氏度，imperial=华氏度"
      },
      "QWeatherLon": {
        "in": "query",
        "name": "lon",
        "required": true,
        "schema": {
          "type": "string",
          "example": "116.404"
        },
        "description": "经度"
      },
      "QWeatherLat": {
        "in": "query",
        "name": "lat",
        "required": true,
        "schema": {
          "type": "string",
          "example": "39.915"
        },
        "description": "纬度"
      },
      "QWeatherLang": {
        "in": "query",
        "name": "lang",
        "schema": {
          "type": "string",
          "default": "zh",
          "example": "zh"
        },
        "description": "返回语言（zh / en）"
      },
      "QWeatherUnit": {
        "in": "query",
        "name": "unit",
        "schema": {
          "type": "string",
          "enum": [
            "m",
            "i"
          ],
          "default": "m"
        },
        "description": "单位，m=公制 i=英制"
      }
    }
  }
}
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"></script>
  </body>
</html>